<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>ðŸš€ Prod Release â€” Mission Control</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
:root { --accent:#ff9800; --danger:#ff1744; --ok:#00e676; --line:#333; }
html,body{height:100%;margin:0;background:#000;color:#fff;font-family:monospace;overflow-x:hidden;}
header{text-align:center;padding:22px 10px;border-bottom:2px solid #151515;position:relative;}
header h1{margin:0 0 8px;color:#ff5555;}
#statusText{color:#0f0;}
main{max-width:1000px;margin:0 auto;padding:16px;}
#controls{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:10px;}
#controls button{border:none;border-radius:14px;cursor:pointer;}
#launchBtn{font-size:28px;padding:20px 44px;color:#fff;background:linear-gradient(90deg,#f44336,#ff9800);box-shadow:0 0 20px #ff5722;animation:pulse 1.5s infinite;}
#abortBtn{display:none;font-size:22px;padding:16px 28px;background:#d32f2f;color:#fff;border:2px solid var(--danger);border-radius:12px;box-shadow:0 0 10px #b71c1c;}
#resetBtn{display:none;font-size:18px;padding:12px 22px;background:#222;color:#fff;border:1px solid #555;border-radius:10px;}
@keyframes pulse{0%{box-shadow:0 0 10px #ff5722}50%{box-shadow:0 0 30px #ff9800}100%{box-shadow:0 0 10px #ff5722}}

#gridTop{display:grid;grid-template-columns:220px 1fr 220px;gap:12px;margin:18px 0 8px;align-items:center;}
@media(max-width:700px){#gridTop{grid-template-columns:1fr;gap:14px;}}

.ring{width:160px;height:160px;border-radius:50%;margin:8px auto;background:conic-gradient(#1f1f1f 0deg,#1f1f1f 360deg);
 box-shadow:inset 0 0 0 8px #111,0 0 16px rgba(255,152,0,.3);position:relative;}
.ring .dot{position:absolute;inset:8px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#000;color:#ffe082;font-size:36px;animation:glow 1s infinite;}
@keyframes glow{0%{text-shadow:0 0 8px var(--accent);color:#fff}50%{text-shadow:0 0 24px var(--accent);color:#ffe082}100%{text-shadow:0 0 8px var(--accent);color:#fff}}
.blast{animation:blastOut 600ms cubic-bezier(.2,.8,.2,1) forwards;}
@keyframes blastOut{0%{transform:scale(1);opacity:1}60%{transform:scale(1.6);opacity:.6}100%{transform:scale(.6) translateY(-20px);opacity:0}}

#preflight,#funFacts{background:#0c0c0c;border:1px solid #161616;border-radius:10px;padding:12px;min-height:160px;}
#preflight h3,#funFacts h3{margin:0 0 6px;color:#ddd;}
.check{display:flex;align-items:center;gap:8px;margin:6px 0;opacity:.6}
.check .box{width:14px;height:14px;border:1px solid #555;border-radius:3px;}
.check.done{opacity:1}
.check.done .box{background:#00e676;border-color:#00e676;box-shadow:0 0 8px rgba(0,230,118,.4)}
.check.done .label{color:#d2ffd2}

#progressWrap{margin-top:16px;display:none;}
#progressShell{position:relative;background:#111;border:1px solid #333;border-radius:8px;overflow:hidden;}
#progressBar{height:18px;width:0%;background:linear-gradient(90deg,#00e676,#00b0ff,#ff00e1);background-size:200% 100%;animation:barGlow 2.2s linear infinite;}
@keyframes barGlow{0%{background-position:0 0}100%{background-position:200% 0}}
#progressPct{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:12px;color:#111;font-weight:bold;text-shadow:0 0 4px rgba(255,255,255,.25);}

#console{background:#000;color:#00e676;padding:18px;margin-top:10px;height:280px;overflow-y:auto;text-align:left;border:2px solid var(--line);border-radius:10px;}
#console.rollup{overflow:hidden;border-color:#222;animation:rollUp .9s ease forwards;}
@keyframes rollUp{0%{height:280px;opacity:1;filter:blur(0)}35%{transform:scaleY(.98);filter:blur(1px)}70%{transform:scaleY(.92);filter:blur(2px);opacity:.6}100%{height:0;padding-top:0;padding-bottom:0;border-width:0;opacity:0;filter:blur(3px)}}

.finale-hero{text-align:center;animation:popIn 600ms cubic-bezier(.2,.8,.2,1) forwards;opacity:0;transform:translateY(10px) scale(.98);}
@keyframes popIn{to{opacity:1;transform:translateY(0) scale(1)}}
.online-badge{color:gold;font-size:46px;margin:6px 0;animation:flash 1s infinite;}
.subtitle{font-size:18px;margin:4px 0 14px;color:#ddd;}
.cat{border-radius:12px;box-shadow:0 8px 40px rgba(255,215,0,.08);}
@keyframes flash{0%{opacity:1}50%{opacity:.1}100%{opacity:1}}

@keyframes shimmerRainbow{0%{background-position:-200% 0;opacity:1}80%{opacity:1}100%{background-position:200% 0;opacity:.4}}
.shimmer{
  background:linear-gradient(90deg, red, orange, yellow, green, cyan, blue, violet);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-size:200% 100%;
  animation:shimmerRainbow 1.5s ease forwards;
}

.toast{position:fixed;top:14px;right:14px;background:#111;color:#fff;border:1px solid #333;border-radius:10px;
 padding:10px 14px;font-size:13px;box-shadow:0 8px 30px rgba(0,0,0,.4);opacity:0;transform:translateY(-8px);
 animation:toastIn .45s ease-out forwards,toastOut .6s ease-in 2.4s forwards;z-index:9999;}
@keyframes toastIn{to{opacity:1;transform:translateY(0)}}
@keyframes toastOut{to{opacity:0;transform:translateY(-8px)}}
.emoji{position:fixed;top:-40px;font-size:28px;pointer-events:none;animation:fall linear forwards;z-index:9998;}
@keyframes fall{to{transform:translateY(110vh) rotate(360deg);opacity:.9}}
#strobe{display:none;position:fixed;inset:0;pointer-events:none;background:rgba(255,0,0,0.18);mix-blend-mode:screen;animation:strobe 1s infinite;}
@keyframes strobe{0%{background:rgba(255,0,0,.06)}50%{background:rgba(255,0,0,.26)}100%{background:rgba(255,0,0,.06)}}
.shake{animation:shakeAnim .4s ease-in-out 6;}
@keyframes shakeAnim{0%,100%{transform:translateX(0)}20%{transform:translateX(-6px)}40%{transform:translateX(6px)}60%{transform:translateX(-4px)}80%{transform:translateX(4px)}}

@media(max-width:700px){.ring{width:140px;height:140px}.ring .dot{font-size:30px}#console{height:220px}#controls button{flex:1 1 100%}}
@media(max-width:420px){.ring{width:120px;height:120px}.ring .dot{font-size:26px}#console{height:180px}.online-badge{font-size:34px}}

@media(prefers-reduced-motion:reduce){*{animation-duration:.001ms!important;animation-iteration-count:1!important;transition:none!important}}
</style>
</head>
<body>
<header>
  <h1>ðŸ”¥ PROD RELEASE: MISSION CONTROL ðŸ”¥</h1>
  <div class="status">Status: <span id="statusText">IDLE</span></div>
</header>

<main>
  <div id="controls">
    <button id="launchBtn" onclick="initiateLaunch()">LAUNCH DEPLOYMENT</button>
    <button id="abortBtn" onclick="abortLaunch()">ABORT MISSION</button>
    <button id="resetBtn" onclick="resetMission()">RESET</button>
  </div>

  <div id="gridTop">
    <section id="preflight">
      <h3>Pre-flight Checklist</h3>
      <div class="check" id="pf1"><div class="box"></div><div class="label">Credentials located</div></div>
      <div class="check" id="pf2"><div class="box"></div><div class="label">Servers caffeinated</div></div>
      <div class="check" id="pf3"><div class="box"></div><div class="label">Backups under desk verified</div></div>
      <div class="check" id="pf4"><div class="box"></div><div class="label">Rubber duck consulted</div></div>
      <div class="check" id="pf5"><div class="box"></div><div class="label">Sanity checks mostly passed (CXO questionable)</div></div>
    </section>

    <section id="countdownWrap">
      <div class="ring"><div class="dot" id="ringDot">13</div></div>
    </section>

    <section id="funFacts">
      <h3 style="margin:0 0 6px;color:#ddd;">Fun Metrics</h3>
      <div id="metric1">Latency: probably fine</div>
      <div id="metric2">Certainty this will work: <strong id="sureNum">60%</strong></div>
      <div id="metric3">Coffee queue length: 42</div>
      <div id="metric4">Hoops jumped through: <strong id="hoopsNum">876</strong></div>
    </section>
  </div>

  <div id="progressWrap">
    <div style="font-size:12px;opacity:.8;margin-bottom:6px;">Deployment Progress</div>
    <div id="progressShell"><div id="progressBar"></div><div id="progressPct">0%</div></div>
  </div>

  <div id="console"></div>
  <div id="finale"></div>
</main>

<div id="strobe"></div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
/* ===== STATE & DOM ===== */
let countdownTimer=null, logTimer=null, partyTimerActive=false, ringDeg=0, currentPhase="IDLE";
const emojis=["ðŸš€","ðŸŽ‰","ðŸ±","ðŸ”¥","âœ¨","ðŸ’¾","ðŸ›°ï¸","ðŸ§ª"];
const statusText=document.getElementById("statusText"),
      ringDot=document.getElementById("ringDot"),
      consoleEl=document.getElementById("console"),
      progressWrap=document.getElementById("progressWrap"),
      progressBar=document.getElementById("progressBar"),
      progressPct=document.getElementById("progressPct"),
      finaleEl=document.getElementById("finale"),
      launchBtn=document.getElementById("launchBtn"),
      abortBtn=document.getElementById("abortBtn"),
      resetBtn=document.getElementById("resetBtn"),
      strobe=document.getElementById("strobe"),
      hoopsEl=document.getElementById("hoopsNum"),
      sureEl=document.getElementById("sureNum"),
      pfEls=[...Array(5)].map((_,i)=>document.getElementById("pf"+(i+1)));

/* ===== UTILS ===== */
function setStatus(t,c){statusText.textContent=t;statusText.style.color=c||"#0f0";}
function logLine(t){consoleEl.innerHTML+=t+"<br/>";consoleEl.scrollTop=consoleEl.scrollHeight;}
function setProgress(p){progressBar.style.width=p+"%";progressPct.textContent=p+"%";}
function clearTimers(){ if(countdownTimer) clearInterval(countdownTimer); if(logTimer) clearInterval(logTimer); }
function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a;}
function formatInt(n){return n.toLocaleString();}
function makeToast(msg){const t=document.createElement('div');t.className='toast';t.textContent=msg;document.body.appendChild(t);setTimeout(()=>t.remove(),2600);}
function runPreflight(){let i=0;const tick=setInterval(()=>{ if(i<pfEls.length){pfEls[i].classList.add("done"); i++;} else clearInterval(tick); },300);}
function emojiRain(dur=7000){const end=Date.now()+dur;const drop=()=>{const e=document.createElement("div");e.className="emoji";e.textContent=emojis[rand(0,emojis.length-1)];e.style.left=Math.random()*100+"vw";e.style.animationDuration=(4000+rand(-800,800))+"ms";document.body.appendChild(e);setTimeout(()=>e.remove(),5200);};(function loop(){for(let i=0;i<rand(2,4);i++)drop();if(Date.now()<end)requestAnimationFrame(loop);})();}

/* ===== LAUNCH ===== */
function initiateLaunch(){
  if(currentPhase!=="IDLE") return;
  currentPhase="COUNTDOWN";
  setStatus("COUNTDOWN","#ff9800");
  launchBtn.style.display="none"; abortBtn.style.display="inline-block"; resetBtn.style.display="none";
  consoleEl.innerHTML=""; finaleEl.innerHTML=""; progressWrap.style.display="none"; setProgress(0);
  runPreflight();

  // Animated metrics during countdown
  let hoops=876, hoopsTarget=1001;
  let sure=60, sureTarget=99.9;
  let n=13; ringDeg=0;
  const ticks=n; // 13 ticks to zero

  hoopsEl.textContent=formatInt(hoops);
  sureEl.textContent=sure.toFixed(0)+"%";
  ringDot.textContent=n;

  const hoopsStep=(hoopsTarget-hoops)/ticks;
  const sureStep=(sureTarget-sure)/ticks;

  countdownTimer=setInterval(()=>{
    // advance ring
    n--; ringDeg+=360/14; // a hair under full circle so it closes as it blasts
    document.querySelector(".ring").style.background=`conic-gradient(#ff9800 ${ringDeg}deg,#1f1f1f ${ringDeg}deg 360deg)`;
    ringDot.textContent=Math.max(0,n);

    // metrics
    hoops = Math.min(hoopsTarget, hoops + hoopsStep);
    sure  = Math.min(sureTarget,  sure  + sureStep);
    hoopsEl.textContent = formatInt(Math.round(hoops));
    sureEl.textContent  = (n>0 ? sure.toFixed(1) : sureTarget.toFixed(1)) + "%";

    if(n<=3 && n>=0){ document.body.classList.add("shake"); setTimeout(()=>document.body.classList.remove("shake"), 380); }

    if(n<=0){
      clearInterval(countdownTimer);
      // lock exact values
      hoopsEl.textContent = formatInt(hoopsTarget);
      sureEl.textContent  = sureTarget.toFixed(1) + "%";

      // one-time rainbow shimmer on hoops
      hoopsEl.classList.add("shimmer");
      hoopsEl.addEventListener("animationend", ()=>{ hoopsEl.classList.remove("shimmer"); }, {once:true});

      ringDot.classList.add("blast");
      startLogs();
    }
  },1000);
}

/* ===== ABORT ===== */
function abortLaunch(){
  if(currentPhase!=="COUNTDOWN" && currentPhase!=="DEPLOYING") return;
  currentPhase="ABORTED"; setStatus("ABORTED","#ff1744");
  clearTimers();
  strobe.style.display="block"; document.body.classList.add("shake");
  consoleEl.innerHTML="> [ABORT] Rollback engagedâ€¦<br/>> Restoring previous stateâ€¦<br/>> All systems back to SAFE mode.<br/>";
  progressWrap.style.display="block"; setProgress(100);
  setTimeout(()=>{ strobe.style.display="none"; document.body.classList.remove("shake"); abortBtn.style.display="none"; resetBtn.style.display="inline-block"; }, 1500);
}

/* ===== DEPLOY LOGS ===== */
function startLogs(){
  currentPhase="DEPLOYING"; setStatus("DEPLOYING","#00e5ff");
  consoleEl.innerHTML=""; progressWrap.style.display="block"; setProgress(0);

  const logs=[
    "Connecting to production clusterâ€¦",
    "Verifying release artifactsâ€¦",
    "Initializing podsâ€¦",
    "Loading secretsâ€¦",
    "Running sanity checksâ€¦",
    "Finalising deploymentâ€¦",
    "Deployment complete. All systems GO!"
  ];

  let i=0;
  logTimer=setInterval(()=>{
    if(currentPhase==="ABORTED"){ clearInterval(logTimer); return; }
    if(i<logs.length){
      logLine("> "+logs[i]);
      setProgress(Math.floor(((i+1)/logs.length)*100));
      i++;
    } else {
      clearInterval(logTimer);
      startCelebration();
    }
  },800);
}

/* ===== CELEBRATION ===== */
function startCelebration(){
  currentPhase="SUCCESS"; setStatus("SUCCESS","#00e676");
  abortBtn.style.display="none"; resetBtn.style.display="inline-block";

  // Confetti loop
  const end=Date.now()+11000; (function frame(){
    confetti({particleCount:12, angle:60, spread:55, origin:{x:0}});
    confetti({particleCount:12, angle:120, spread:55, origin:{x:1}});
    if(Date.now()<end) requestAnimationFrame(frame);
  })();

  emojiRain(7000);
  progressWrap.style.display="none";
  consoleEl.classList.add("rollup");

  setTimeout(()=>{
    document.body.style.background="radial-gradient(circle,#000,#101010 40%,#111)";
    document.body.style.display="flex"; document.body.style.flexDirection="column";
    document.body.style.alignItems="center"; document.body.style.justifyContent="center";
    document.body.style.height="100vh";

    finaleEl.innerHTML=`
      <div class="finale-hero">
        <h1 class="online-badge">âœ… CODE IN PRODUCTION</h1>
        <p class="subtitle">Tech release successfully deployed.</p>
        <img src="https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif" width="260" class="cat" alt="victory cat"/>
      </div>
    `;

    // Achievements
    const ach=[
      "ðŸ… Achievement: Deployed on First Click",
      "ðŸŽ–ï¸ Logs Read Aloud for Performance",
      "ðŸ† Rubber Duck Approved",
      "ðŸ¥³ 100% Uptime (last 12 seconds)"
    ];
    setTimeout(()=>makeToast(ach[rand(0,ach.length-1)]),1200);
    if(Math.random()>0.5) setTimeout(()=>makeToast(ach[rand(0,ach.length-1)]),2000);
  },950);
}

/* ===== RESET ===== */
function resetMission(){
  confetti({particleCount:100,spread:70,startVelocity:45,scalar:.9,origin:{x:.8,y:.15}});
  makeToast("Ready for another run âœ¨");
  clearTimers();
  strobe.style.display="none"; document.body.classList.remove("shake");
  currentPhase="IDLE"; setStatus("IDLE","#0f0");

  // Reset visuals
  ringDot.textContent="13";
  document.querySelector(".ring").style.background=`conic-gradient(#1f1f1f 0deg,#1f1f1f 360deg)`;
  ringDot.classList.remove("blast");
  consoleEl.classList.remove("rollup");
  consoleEl.style.height = (window.innerWidth<420 ? "180px" : (window.innerWidth<700 ? "220px" : "280px"));
  consoleEl.innerHTML=""; finaleEl.innerHTML="";
  progressWrap.style.display="none"; setProgress(0);
  launchBtn.style.display="inline-block"; abortBtn.style.display="none"; resetBtn.style.display="none";

  // Reset metrics
  hoopsEl.classList.remove("shimmer");
  hoopsEl.textContent="876";
  sureEl.textContent="60%";

  // Reset preflight
  for(const el of pfEls) el.classList.remove("done");
}
</script>
</body>
</html>
