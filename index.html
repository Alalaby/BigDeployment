<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ðŸš€ THE BIG TECH DEPLOY â€” MISSION CONTROL</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body style="margin:0; background:#000; color:#fff; font-family:monospace; overflow-x:hidden;">

  <header style="text-align:center; padding:26px 10px; border-bottom:2px solid #222;">
    <h1 style="margin:0 0 8px; color:#ff5555;">ðŸ”¥ TECH RELEASE: MISSION CONTROL ðŸ”¥</h1>
    <div style="opacity:.9;">Status: <span id="statusText" style="color:#0f0;">IDLE</span></div>
  </header>

  <main style="max-width:980px; margin:0 auto; padding:18px;">
    <!-- Control Row -->
    <div id="controls" style="display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:10px;">
      <button id="launchBtn" onclick="initiateLaunch()" style="font-size:28px;padding:20px 44px;background:linear-gradient(90deg,#f44336,#ff9800);color:#fff;border:none;border-radius:14px;cursor:pointer;box-shadow:0 0 20px #ff5722;animation:pulse 1.5s infinite;">LAUNCH DEPLOYMENT</button>
      <button id="abortBtn" onclick="abortLaunch()" style="display:none;font-size:22px;padding:16px 28px;background:#d32f2f;color:#fff;border:2px solid #ff1744;border-radius:12px;cursor:pointer;box-shadow:0 0 10px #b71c1c;">ABORT MISSION</button>
      <button id="resetBtn" onclick="resetMission()" style="display:none;font-size:18px;padding:12px 22px;background:#222;color:#fff;border:1px solid #555;border-radius:10px;cursor:pointer;">RESET</button>
    </div>

    <!-- Countdown -->
    <div id="countdownWrap" style="text-align:center; margin:24px 0 8px;">
      <div id="countdown" style="font-size:76px; letter-spacing:4px;"></div>
      <div id="countdownLabel" style="height:24px; color:#ff9800;"></div>
    </div>

    <!-- Console -->
    <div id="console" style="background:#000;color:#00e676;padding:20px;margin-top:14px;height:320px;overflow-y:auto;text-align:left;border:2px solid #333;border-radius:10px;"></div>

    <!-- Progress -->
    <div id="progressWrap" style="margin-top:16px; display:none;">
      <div style="font-size:12px; opacity:.8; margin-bottom:6px;">Deployment Progress</div>
      <div style="background:#111; border:1px solid #333; border-radius:8px; overflow:hidden;">
        <div id="progressBar" style="height:14px; width:0%; background:linear-gradient(90deg,#00e676,#00b0ff);"></div>
      </div>
    </div>

    <!-- Finale -->
    <div id="finale" style="text-align:center; margin:26px 0 10px;"></div>
  </main>

  <!-- Warning strobe overlay (used on abort) -->
  <div id="strobe" style="display:none; position:fixed; inset:0; pointer-events:none; background:rgba(255,0,0,0.18); mix-blend-mode:screen; animation:strobe 1s infinite;"></div>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    // ----- STATE -----
    let countdownTimer = null;
    let logTimer = null;
    let partyTimerActive = false;
    let currentPhase = "IDLE"; // IDLE | COUNTDOWN | DEPLOYING | SUCCESS | ABORTED

    const statusText = document.getElementById("statusText");
    const countdownEl = document.getElementById("countdown");
    const countdownLabel = document.getElementById("countdownLabel");
    const consoleEl = document.getElementById("console");
    const progressWrap = document.getElementById("progressWrap");
    const progressBar = document.getElementById("progressBar");
    const finaleEl = document.getElementById("finale");
    const launchBtn = document.getElementById("launchBtn");
    const abortBtn = document.getElementById("abortBtn");
    const resetBtn = document.getElementById("resetBtn");
    const strobe = document.getElementById("strobe");

    // ----- UTIL -----
    function setStatus(t, color) {
      statusText.textContent = t;
      statusText.style.color = color || '#0f0';
    }
    function logLine(t) {
      consoleEl.innerHTML += t + "<br/>";
      consoleEl.scrollTop = consoleEl.scrollHeight;
    }
    function setProgress(pct) {
      progressBar.style.width = pct + "%";
    }
    function clearTimers() {
      if (countdownTimer) { clearInterval(countdownTimer); countdownTimer = null; }
      if (logTimer) { clearInterval(logTimer); logTimer = null; }
    }
    function stopParty() { partyTimerActive = false; }

    // ----- LAUNCH -----
    function initiateLaunch() {
      if (currentPhase !== "IDLE") return;
      currentPhase = "COUNTDOWN";
      setStatus("COUNTDOWN", "#ff9800");
      launchBtn.style.display = "none";
      abortBtn.style.display = "inline-block";
      resetBtn.style.display = "none";
      consoleEl.innerHTML = "";
      finaleEl.innerHTML = "";
      progressWrap.style.display = "none";
      setProgress(0);

      let n = 10;
      countdownEl.style.animation = "glow 1s infinite";
      countdownLabel.textContent = "ARMING SEQUENCEâ€¦";
      countdownEl.textContent = n;

      countdownTimer = setInterval(() => {
        n--;
        if (n >= 0) {
          countdownEl.textContent = n;
          if (n <= 3) { countdownLabel.textContent = "FINAL VALIDATIONSâ€¦"; }
        } else {
          clearInterval(countdownTimer); countdownTimer = null;
          countdownEl.textContent = "DEPLOYMENT INITIATED";
          countdownEl.style.animation = "none";
          countdownLabel.textContent = "";
          startLogs();
        }
      }, 1000);
    }

    // ----- ABORT -----
    function abortLaunch() {
      if (currentPhase !== "COUNTDOWN" && currentPhase !== "DEPLOYING") return;
      currentPhase = "ABORTED";
      setStatus("ABORTED", "#ff1744");
      clearTimers();
      stopParty();

      // Visual drama
      strobe.style.display = "block";
      document.body.classList.add("shake");

      // Screen takeover
      finaleEl.innerHTML = `
        <h2 style="color:#ff5252; font-size:40px; margin:12px 0;">ðŸš¨ MISSION ABORTED ðŸš¨</h2>
        <p style="color:#ff8a80; margin:0 0 10px;">Rollback engaged. Systems returning to safe state.</p>
      `;

      // Rollback logs
      consoleEl.innerHTML = "";
      const rollback = [
        "[ABORT] Signal received. Stopping countdownâ€¦",
        "Terminating deployment containersâ€¦",
        "Reverting configuration to last known goodâ€¦",
        "Draining traffic from updated podsâ€¦",
        "Restoring previous artifactsâ€¦",
        "Validating service healthâ€¦",
        "All systems back to SAFE mode."
      ];
      let i = 0;
      logTimer = setInterval(() => {
        if (i < rollback.length) { logLine(rollback[i++]); setProgress(Math.min(100, (i/rollback.length)*100)); }
        else {
          clearInterval(logTimer); logTimer = null;
          abortBtn.style.display = "none";
          resetBtn.style.display = "inline-block";
          progressWrap.style.display = "block";
          setProgress(100);
          // calm lights after a beat
          setTimeout(() => { strobe.style.display = "none"; document.body.classList.remove("shake"); }, 1200);
        }
      }, 700);
    }

    // ----- LOGS / DEPLOY -----
    function startLogs() {
      currentPhase = "DEPLOYING";
      setStatus("DEPLOYING", "#00e5ff");
      consoleEl.innerHTML = "";
      progressWrap.style.display = "block";
      setProgress(0);

      const logs = [
        "Connecting to production clusterâ€¦",
        "Verifying release artifactsâ€¦",
        "Initializing Kubernetes podsâ€¦",
        "Loading configuration secrets (shh ðŸ¤«)â€¦",
        "Checking system dependenciesâ€¦",
        "Running automated sanity checksâ€¦",
        "Starting deployment containersâ€¦",
        "Synchronising nodes across regionsâ€¦",
        "Warming caches and priming edgeâ€¦",
        "Finalising deployment sequenceâ€¦",
        "Activating monitoring & alertsâ€¦",
        "Deployment complete. All systems GO!"
      ];

      let i = 0;
      logTimer = setInterval(() => {
        if (currentPhase === "ABORTED") { clearInterval(logTimer); logTimer = null; return; }
        if (i < logs.length) {
          logLine("> " + logs[i]);
          setProgress(Math.floor(((i+1)/logs.length)*100));
          i++;
        } else {
          clearInterval(logTimer); logTimer = null;
          startCelebration();
        }
      }, 800);
    }

    // ----- CELEBRATION -----
    function startCelebration() {
      currentPhase = "SUCCESS";
      setStatus("SUCCESS", "#00e676");
      abortBtn.style.display = "none";
      resetBtn.style.display = "inline-block";

      // 8s fireworks confetti
      partyTimerActive = true;
      const end = Date.now() + 8000;
      (function frame() {
        confetti({ particleCount: 8, angle: 60, spread: 55, origin: { x: 0 } });
        confetti({ particleCount: 8, angle: 120, spread: 55, origin: { x: 1 } });
        if (partyTimerActive && Date.now() < end) { requestAnimationFrame(frame); }
      })();

      document.body.style.background = "radial-gradient(circle,#000,#101010 40%, #111)";
      finaleEl.innerHTML = `
        <h2 style="color:gold; font-size:44px; animation:flash 1s infinite; margin:10px 0;">âœ… SYSTEMS ONLINE</h2>
        <p style="font-size:18px; margin:6px 0 14px; color:#ddd;">Tech Release successfully deployed.</p>
        <img src="https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif" width="300" alt="victory cat"/>
      `;
    }

    // ----- RESET -----
    function resetMission() {
      clearTimers();
      stopParty();
      strobe.style.display = "none";
      document.body.classList.remove("shake");
      currentPhase = "IDLE";
      setStatus("IDLE", "#0f0");
      countdownEl.textContent = "";
      countdownEl.style.animation = "none";
      countdownLabel.textContent = "";
      consoleEl.innerHTML = "";
      finaleEl.innerHTML = "";
      progressWrap.style.display = "none";
      setProgress(0);
      launchBtn.style.display = "inline-block";
      abortBtn.style.display = "none";
      resetBtn.style.display = "none";
      document.body.style.background = "#000";
    }
  </script>

  <style>
    @keyframes flash {
      0% { opacity: 1; }
      50% { opacity: .1; }
      100% { opacity: 1; }
    }
    @keyframes pulse {
      0% { box-shadow:0 0 10px #ff5722; }
      50% { box-shadow:0 0 30px #ff9800; }
      100% { box-shadow:0 0 10px #ff5722; }
    }
    @keyframes glow {
      0% { text-shadow: 0 0 8px #ff9800; color:#fff; }
      50% { text-shadow: 0 0 24px #ff9800; color:#ffe082; }
      100% { text-shadow: 0 0 8px #ff9800; color:#fff; }
    }
    @keyframes strobe {
      0% { background: rgba(255,0,0,0.06); }
      50% { background: rgba(255,0,0,0.26); }
      100% { background: rgba(255,0,0,0.06); }
    }
    @keyframes shakeAnim {
      0%,100% { transform: translateX(0); }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-4px); }
      80% { transform: translateX(4px); }
    }
    .shake { animation: shakeAnim 0.4s ease-in-out 6; }
  </style>
</body>
</html>
